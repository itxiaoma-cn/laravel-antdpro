"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[250],{19054:function(K,M,e){var y=e(1413),m=e(91),R=e(67294),u=e(33518),F=e(85893),j=["fieldProps","request","params","proFieldProps"],T=function(f,A){var b=f.fieldProps,g=f.request,h=f.params,D=f.proFieldProps,c=(0,m.Z)(f,j);return(0,F.jsx)(u.Z,(0,y.Z)({valueType:"treeSelect",fieldProps:b,ref:A,request:g,params:h,filedConfig:{customLightMode:!0},proFieldProps:D},c))},d=R.forwardRef(T);M.Z=d},10442:function(K,M,e){var y=e(15009),m=e.n(y),R=e(99289),u=e.n(R),F=e(5574),j=e.n(F),T=e(67294),d=e(2618),S=function(A){var b=(0,T.useState)([]),g=j()(b,2),h=g[0],D=g[1],c=function(){var L=u()(m()().mark(function U(){var B;return m()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,d.et)(A,{pageSize:1e4});case 2:B=O.sent,B.success&&D(B.data);case 4:case"end":return O.stop()}},U)}));return function(){return L.apply(this,arguments)}}();return(0,T.useEffect)(function(){c().catch(console.error)},[]),{items:h,setItems:D}};M.Z=S},52693:function(K,M,e){e.r(M),e.d(M,{default:function(){return oe}});var y=e(5574),m=e.n(y),R=e(15009),u=e.n(R),F=e(97857),j=e.n(F),T=e(99289),d=e.n(T),S=e(2618),f=e(51042),A=e(6110),b=e(8849),g=e(33345),h=e(2453),D=e(71577),c=e(67294),L=e(37476),U=e(10442),B=e(34994),$=e(5966),O=e(19054),a=e(85893),V=function(){var n=(0,U.Z)("/permissions/trees"),s=n.items;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(B.A.Group,{children:[(0,a.jsx)($.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u540D\u79F0"}],width:"md",label:"\u540D\u79F0",name:"name"}),(0,a.jsx)(O.Z,{name:"parent_id",placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,label:"\u7236\u7EA7\u6743\u9650",width:"md",secondary:!0,fieldProps:{showArrow:!1,filterTreeNode:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!1,autoClearSearchValue:!0,treeNodeFilterProp:"title",fieldNames:{label:"title"},treeData:s},rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]})]})})},G=V,X=function(n){var s=n.open,l=n.onOpenChange,t=n.onFinish;return(0,a.jsx)(L.Y,{title:"\u65B0\u589E\u6743\u9650",width:"50%",open:s,onOpenChange:l,modalProps:{destroyOnClose:!0,maskClosable:!1},onFinish:t,submitter:{render:!1},children:(0,a.jsx)(G,{newRecord:!0})})},H=X,J=e(31991),k=e(85265),q=function(n){var s=n.onClose,l=n.open,t=n.currentRow,r=n.columns;return(0,a.jsx)(k.Z,{width:"70%",open:l,onClose:s,closable:!1,children:(t==null?void 0:t.username)&&(0,a.jsx)(J.vY,{column:2,title:t==null?void 0:t.username,request:d()(u()().mark(function _(){return u()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",{data:t||{}});case 1:case"end":return E.stop()}},_)})),params:{id:t==null?void 0:t.username},columns:r})})},ee=q,re=e(5298),ne=e(96365),ae=function(n){var s,l=n.updateModalOpen,t=n.onCancel,r=n.onSubmit,_=n.values;return(0,a.jsxs)(L.Y,{title:"\u4FEE\u6539\u6743\u9650",width:"50%",modalProps:{destroyOnClose:!0,maskClosable:!1},open:l,onOpenChange:t,onFinish:r,initialValues:j()(j()({},_),{},{roleIds:(s=_.roles)===null||s===void 0?void 0:s.map(function(Z){return Z.id})}),submitter:{render:!1},children:[(0,a.jsx)(G,{}),(0,a.jsx)(re.Z.Item,{name:"id",label:!1,children:(0,a.jsx)(ne.Z,{type:"hidden"})})]})},te=ae,se=function(){var P=d()(u()().mark(function n(s){var l;return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=h.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,(0,S.jX)("/permissions",j()({},s));case 4:return l(),h.ZP.success("\u6DFB\u52A0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),l(),r.abrupt("return",!1);case 13:case"end":return r.stop()}},n,null,[[1,9]])}));return function(s){return P.apply(this,arguments)}}(),ue=function(){var P=d()(u()().mark(function n(s){var l;return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=h.ZP.loading("\u6B63\u5728\u66F4\u65B0"),r.prev=1,r.next=4,(0,S.$G)("/permissions/".concat(s.id),s);case 4:return l(),h.ZP.success("\u66F4\u65B0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),l(),r.abrupt("return",!1);case 13:case"end":return r.stop()}},n,null,[[1,9]])}));return function(s){return P.apply(this,arguments)}}(),le=function(){var n=(0,c.useState)(!1),s=m()(n,2),l=s[0],t=s[1],r=(0,c.useState)(!1),_=m()(r,2),Z=_[0],E=_[1],ie=(0,c.useState)(!1),N=m()(ie,2),de=N[0],me=N[1],I=(0,c.useRef)(),ce=(0,c.useState)(),Q=m()(ce,2),z=Q[0],W=Q[1],Y=[{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u7236\u7EA7\u540D\u79F0",dataIndex:"parent",renderText:function(o){return o==null?void 0:o.name}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",fixed:"right",render:function(o,C){return[(0,a.jsx)("a",{onClick:function(){E(!0),W(C)},children:"\u7F16\u8F91"},"update")]}}];return(0,a.jsxs)(A._z,{children:[(0,a.jsx)(b.Z,{headerTitle:"\u6743\u9650\u7BA1\u7406",actionRef:I,rowKey:"id",search:!1,pagination:{pageSize:10},toolBarRender:function(){return[(0,a.jsxs)(D.ZP,{type:"primary",onClick:function(){t(!0)},children:[(0,a.jsx)(f.Z,{})," ",(0,a.jsx)(g.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:function(){var p=d()(u()().mark(function o(C,v,w){return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,S.et)("/permissions",C,v,w));case 1:case"end":return x.stop()}},o)}));return function(o,C,v){return p.apply(this,arguments)}}(),columns:Y,rowSelection:!1}),(0,a.jsx)(H,{open:l,onOpenChange:t,onFinish:function(){var p=d()(u()().mark(function o(C){var v;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,se(C);case 2:v=i.sent,v&&(t(!1),I.current&&I.current.reload());case 4:case"end":return i.stop()}},o)}));return function(o){return p.apply(this,arguments)}}()}),(0,a.jsx)(te,{onSubmit:function(){var p=d()(u()().mark(function o(C){var v;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ue(C);case 2:v=i.sent,v&&(E(!1),W(void 0),I.current&&I.current.reload());case 4:case"end":return i.stop()}},o)}));return function(o){return p.apply(this,arguments)}}(),onCancel:E,updateModalOpen:Z,values:z||{}}),(0,a.jsx)(ee,{open:de,currentRow:z,columns:Y,onClose:function(){W(void 0),me(!1)}})]})},oe=le}}]);
