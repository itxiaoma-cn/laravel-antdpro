"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{78147:function(he,O,e){e.r(O),e.d(O,{default:function(){return fe}});var W=e(15009),S=e.n(W),D=e(97857),F=e.n(D),V=e(99289),I=e.n(V),k=e(5574),z=e.n(k),G=e(99702),w=e(2618),K=e(87547),u=e(1413),j=e(67294),X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Y=X,$=e(91146),R=function(a,n){return j.createElement($.Z,(0,u.Z)((0,u.Z)({},a),{},{ref:n,icon:Y}))};R.displayName="LockOutlined";var J=j.forwardRef(R),Q=e(91),q=e(10915),_=e(17093),ee=e(94184),te=e.n(ee),ne=e(34994),N=e(4942),ae=e(98082),re=function(a){var n;return n={},(0,N.Z)(n,a.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:a.colorTextSecondary,fontSize:a.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),(0,N.Z)(n,"@media (min-width: @screen-md-min)",(0,N.Z)({},"".concat(a.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})),n};function se(s){return(0,ae.Xj)("LoginForm",function(a){var n=(0,u.Z)((0,u.Z)({},a),{},{componentCls:".".concat(s)});return[re(n)]})}var t=e(85893),ie=["logo","message","contentStyle","title","subTitle","actions","children"];function oe(s){var a,n=s.logo,m=s.message,E=s.contentStyle,L=s.title,C=s.subTitle,Z=s.actions,H=s.children,i=(0,Q.Z)(s,ie),y=(0,q.YB)(),T=i.submitter===!1?!1:(0,u.Z)((0,u.Z)({searchConfig:{submitText:y.getMessage("loginForm.submitText","\u767B\u5F55")}},i.submitter),{},{submitButtonProps:(0,u.Z)({size:"large",style:{width:"100%"}},(a=i.submitter)===null||a===void 0?void 0:a.submitButtonProps),render:function(o,l){var c,v=l.pop();if(typeof(i==null||(c=i.submitter)===null||c===void 0?void 0:c.render)=="function"){var p,r;return i==null||(p=i.submitter)===null||p===void 0||(r=p.render)===null||r===void 0?void 0:r.call(p,o,l)}return v}}),A=(0,j.useContext)(_.ZP.ConfigContext),x=A.getPrefixCls("pro-form-login"),B=se(x),P=B.wrapSSR,M=B.hashId,d=function(o){return"".concat(x,"-").concat(o," ").concat(M)},f=(0,j.useMemo)(function(){return n?typeof n=="string"?(0,t.jsx)("img",{src:n}):n:null},[n]);return P((0,t.jsxs)("div",{className:te()(d("container"),M),children:[(0,t.jsxs)("div",{className:"".concat(d("top")," ").concat(M).trim(),children:[L||f?(0,t.jsxs)("div",{className:"".concat(d("header")),children:[f?(0,t.jsx)("span",{className:d("logo"),children:f}):null,L?(0,t.jsx)("span",{className:d("title"),children:L}):null]}):null,C?(0,t.jsx)("div",{className:d("desc"),children:C}):null]}),(0,t.jsxs)("div",{className:d("main"),style:(0,u.Z)({width:328},E),children:[(0,t.jsxs)(ne.A,(0,u.Z)((0,u.Z)({isKeyPressSubmit:!0},i),{},{submitter:T,children:[m,H]})),Z?(0,t.jsx)("div",{className:d("main-other"),children:Z}):null]})]}))}var U=e(5966),b=e(28906),h=e(33345),le=e(38925),ce=e(2453),ue=e(67610),de=e(73935),xe=function(){var a=useEmotionCss(function(n){var m=n.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:m.colorPrimaryActive}}});return _jsxs(_Fragment,{children:[_jsx(AlipayCircleOutlined,{className:a},"AlipayCircleOutlined"),_jsx(TaobaoCircleOutlined,{className:a},"TaobaoCircleOutlined"),_jsx(WeiboCircleOutlined,{className:a},"WeiboCircleOutlined")]})},ge=function(){var a=(0,b.l)(function(n){var m=n.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:m.borderRadius,":hover":{backgroundColor:m.colorBgTextHover}}});return(0,t.jsx)("div",{className:a,"data-lang":!0,children:h.SelectLang&&(0,t.jsx)(h.SelectLang,{})})},ve=function(a){var n=a.content;return(0,t.jsx)(le.Z,{style:{marginBottom:24},message:n,type:"error",showIcon:!0})},me=function(){var a=(0,j.useState)({}),n=z()(a,2),m=n[0],E=n[1],L=(0,j.useState)("account"),C=z()(L,2),Z=C[0],H=C[1],i=(0,h.useModel)("@@initialState"),y=i.initialState,T=i.setInitialState,A=(0,b.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundSize:"100% 100%"}}),x=(0,h.useIntl)(),B=function(){var f=I()(S()().mark(function g(){var o,l;return S()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,y==null||(o=y.fetchUserInfo)===null||o===void 0?void 0:o.call(y);case 2:l=v.sent,l&&(0,de.flushSync)(function(){T(function(p){return F()(F()({},p),{},{currentUser:l})})});case 4:case"end":return v.stop()}},g)}));return function(){return f.apply(this,arguments)}}(),P=function(){var f=I()(S()().mark(function g(o){var l,c,v;return S()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,w.x4)(F()({},o));case 3:if(l=r.sent,!(l&&l.success)){r.next=13;break}return c=x.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),ce.ZP.success(c),sessionStorage.setItem("token",l.token),r.next=10,B();case 10:return v=new URL(window.location.href).searchParams,h.history.push(v.get("redirect")||"/"),r.abrupt("return");case 13:r.next=17;break;case 15:r.prev=15,r.t0=r.catch(0);case 17:case"end":return r.stop()}},g,null,[[0,15]])}));return function(o){return f.apply(this,arguments)}}(),M=m.status,d=m.type;return(0,t.jsxs)("div",{className:A,children:[(0,t.jsx)(h.Helmet,{children:(0,t.jsxs)("title",{children:[x.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",ue.Z.title]})}),(0,t.jsx)(ge,{}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(oe,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/avatar.jpeg"}),title:"\u901A\u7528\u9879\u76EE\u7BA1\u7406\u7CFB\u7EDF",subTitle:"Laravel8 + Antd Pro V6",initialValues:{autoLogin:!0},onFinish:function(){var f=I()(S()().mark(function g(o){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P(o);case 2:case"end":return c.stop()}},g)}));return function(g){return f.apply(this,arguments)}}(),children:[M==="error"&&d==="account"&&(0,t.jsx)(ve,{content:x.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),Z==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.Z,{name:"email",fieldProps:{size:"large",prefix:(0,t.jsx)(K.Z,{})},placeholder:x.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin@admin.com"}),rules:[{required:!0,message:(0,t.jsx)(h.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,t.jsx)(U.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(J,{})},placeholder:x.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: 123456"}),rules:[{required:!0,message:(0,t.jsx)(h.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]})]})}),(0,t.jsx)(G.Z,{})]})},fe=me}}]);
