"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[735],{41851:function(Se,A,r){r.r(A),r.d(A,{default:function(){return he}});var K=r(5574),F=r.n(K),N=r(15009),l=r.n(N),V=r(97857),x=r.n(V),W=r(99289),p=r.n(W),T=r(2618),X=r(51042),H=r(6110),J=r(8849),Q=r(2236),$=r(33345),w=r(2453),B=r(36147),U=r(71577),R=r(67294),b=r(37476),q=r(34994),_=r(5966),n=r(85893),ee=function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.A.Group,{children:(0,n.jsx)(_.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"}],width:"md",label:"\u540D\u79F0",name:"name"})})})},k=ee,ne=function(a){var t=a.open,u=a.onOpenChange,s=a.onFinish;return(0,n.jsx)(b.Y,{title:"\u65B0\u589E\u90E8\u95E8",width:"50%",open:t,onOpenChange:u,modalProps:{destroyOnClose:!0,maskClosable:!1},onFinish:s,children:(0,n.jsx)(k,{newRecord:!0})})},re=ne,ae=r(31991),te=r(85265),se=function(a){var t=a.onClose,u=a.open,s=a.currentRow,e=a.columns;return(0,n.jsx)(te.Z,{width:"70%",open:u,onClose:t,closable:!1,children:(s==null?void 0:s.username)&&(0,n.jsx)(ae.vY,{column:2,title:s==null?void 0:s.username,request:p()(l()().mark(function C(){return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",{data:s||{}});case 1:case"end":return g.stop()}},C)})),params:{id:s==null?void 0:s.username},columns:e})})},ue=se,le=r(5298),oe=r(96365),ie=function(a){var t,u=a.updateModalOpen,s=a.onCancel,e=a.onSubmit,C=a.values;return(0,n.jsxs)(b.Y,{title:"\u4FEE\u6539\u90E8\u95E8",width:"50%",modalProps:{destroyOnClose:!0,maskClosable:!1},open:u,onOpenChange:s,onFinish:e,initialValues:x()(x()({},C),{},{roleIds:(t=C.roles)===null||t===void 0?void 0:t.map(function(M){return M.id})}),children:[(0,n.jsx)(k,{}),(0,n.jsx)(le.Z.Item,{name:"id",label:!1,children:(0,n.jsx)(oe.Z,{type:"hidden"})})]})},de=ie,ce=function(){var v=p()(l()().mark(function a(t){var u;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=w.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,T.jX)("/company/departments",x()({},t));case 4:return u(),w.ZP.success("\u6DFB\u52A0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),u(),e.abrupt("return",!1);case 13:case"end":return e.stop()}},a,null,[[1,9]])}));return function(t){return v.apply(this,arguments)}}(),ve=function(){var v=p()(l()().mark(function a(t){var u;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=w.ZP.loading("\u6B63\u5728\u66F4\u65B0"),e.prev=1,e.next=4,(0,T.$G)("/company/departments/".concat(t.id),t);case 4:return u(),w.ZP.success("\u66F4\u65B0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),u(),e.abrupt("return",!1);case 13:case"end":return e.stop()}},a,null,[[1,9]])}));return function(t){return v.apply(this,arguments)}}(),D=function(){var v=p()(l()().mark(function a(t){var u;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=w.ZP.loading("\u6B63\u5728\u5220\u9664"),t){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,T.cl)("/company/departments",{ids:t});case 6:return u(),w.ZP.success("\u5220\u9664\u6210\u529F"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),u(),e.abrupt("return",!1);case 15:case"end":return e.stop()}},a,null,[[3,11]])}));return function(t){return v.apply(this,arguments)}}(),fe=function(){var a=(0,R.useState)(!1),t=F()(a,2),u=t[0],s=t[1],e=(0,R.useState)(!1),C=F()(e,2),M=C[0],g=C[1],pe=(0,R.useState)(!1),G=F()(pe,2),me=G[0],ge=G[1],j=(0,R.useRef)(),Ce=(0,R.useState)(),I=F()(Ce,2),Y=I[0],P=I[1],je=(0,R.useState)([]),z=F()(je,2),S=z[0],E=z[1],L=[{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",fixed:"right",render:function(i,d){return[(0,n.jsx)("a",{onClick:function(){g(!0),P(d)},children:"\u7F16\u8F91"},"update"),(0,n.jsx)("a",{onClick:function(){return B.Z.confirm({title:"\u786E\u8BA4\u5220\u9664?",onOk:function(){var h=p()(l()().mark(function y(){var m,O;return l()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,D([d.id]);case 2:E([]),(m=j.current)===null||m===void 0||(O=m.reloadAndRest)===null||O===void 0||O.call(m);case 4:case"end":return Z.stop()}},y)}));function o(){return h.apply(this,arguments)}return o}(),content:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},children:"\u5220\u9664"},"delete")]}}];return(0,n.jsxs)(H._z,{children:[(0,n.jsx)(J.Z,{headerTitle:"\u90E8\u95E8\u7BA1\u7406",actionRef:j,rowKey:"id",search:!1,pagination:{pageSize:10},toolBarRender:function(){return[(0,n.jsxs)(U.ZP,{type:"primary",onClick:function(){s(!0)},children:[(0,n.jsx)(X.Z,{})," ",(0,n.jsx)($.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:function(){var f=p()(l()().mark(function i(d,c,h){return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,T.et)("/company/departments",d,c,h));case 1:case"end":return y.stop()}},i)}));return function(i,d,c){return f.apply(this,arguments)}}(),columns:L,rowSelection:{onChange:function(i,d){E(d)}}}),(S==null?void 0:S.length)>0&&(0,n.jsx)(Q.S,{extra:(0,n.jsxs)("div",{children:[(0,n.jsx)($.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,n.jsx)("a",{style:{fontWeight:600},children:S.length})," ",(0,n.jsx)($.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,n.jsx)(U.ZP,{type:"primary",danger:!0,onClick:function(){return B.Z.confirm({title:"\u786E\u8BA4\u5220\u9664?",onOk:function(){var i=p()(l()().mark(function c(){var h,o;return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,D(S==null?void 0:S.map(function(O){return O.id}));case 2:E([]),(h=j.current)===null||h===void 0||(o=h.reloadAndRest)===null||o===void 0||o.call(h);case 4:case"end":return m.stop()}},c)}));function d(){return i.apply(this,arguments)}return d}(),content:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},children:(0,n.jsx)($.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,n.jsx)(re,{open:u,onOpenChange:s,onFinish:function(){var f=p()(l()().mark(function i(d){var c;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ce(d);case 2:c=o.sent,c&&(s(!1),j.current&&j.current.reload());case 4:case"end":return o.stop()}},i)}));return function(i){return f.apply(this,arguments)}}()}),(0,n.jsx)(de,{onSubmit:function(){var f=p()(l()().mark(function i(d){var c;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ve(d);case 2:c=o.sent,c&&(g(!1),P(void 0),j.current&&j.current.reload());case 4:case"end":return o.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),onCancel:g,updateModalOpen:M,values:Y||{}}),(0,n.jsx)(ue,{open:me,currentRow:Y,columns:L,onClose:function(){P(void 0),ge(!1)}})]})},he=fe}}]);
